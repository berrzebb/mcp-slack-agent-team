# Slack MCP Server

Claude Code â†” ì‚¬ìš©ì ê°„ Slack ê¸°ë°˜ ì–‘ë°©í–¥ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ MCP ì„œë²„.

Slackì„ í†µí•´ Claude Code ì—ì´ì „íŠ¸ë¥¼ ì›ê²©ìœ¼ë¡œ ì œì–´í•˜ê³ , ë©€í‹° ì—ì´ì „íŠ¸ íŒ€ì„ ê´€ë¦¬í•˜ë©°, ìœ„í—˜í•œ ëª…ë ¹ì— ëŒ€í•´ Slack ê¸°ë°˜ ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥

- **ì›ê²© ì œì–´**: Slack ì±„ë„ì—ì„œ Claude Codeì—ê²Œ ëª…ë ¹ì„ ë³´ë‚´ê³ , ê²°ê³¼ë¥¼ ìŠ¤ë ˆë“œë¡œ ë°›ê¸°
- **ëª…ë ¹ ë£¨í”„**: `slack_command_loop`ë¡œ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ë¥¼ ì™„ì „íˆ ëŒ€ì²´
- **ë°±ê·¸ë¼ìš´ë“œ í´ëŸ¬**: 10ì´ˆ ê°„ê²© ìë™ ë©”ì‹œì§€ ìˆ˜ì§‘ â€” ë„êµ¬ í˜¸ì¶œ ì—†ì´ë„ ë©”ì‹œì§€ ìœ ì‹¤ ë°©ì§€
- **ê¸´ ë©”ì‹œì§€ ìë™ ì²˜ë¦¬**: 3,900ì ì´ˆê³¼ ì‹œ ìë™ ë¶„í• , 8,000ì ì´ˆê³¼ ì‹œ íŒŒì¼ ì—…ë¡œë“œ
- **ì—ì´ì „íŠ¸ íŒ€ ê´€ë¦¬**: ì „ìš© ì±„ë„ ìƒì„±, ì—­í• ë³„ ì´ë¦„/ì•„ì´ì½˜ í‘œì‹œ, ë¸Œë¡œë“œìº ìŠ¤íŠ¸- **ì—ì´ì „íŠ¸ í˜ë¥´ì†Œë‚˜**: 12ì¢… named persona (AriağŸ‘‘, SageğŸ“‹, ForgeğŸ”¨ ë“±) â€” ì—­í• ë³„ ê³ ìœ  ì´ë¦„Â·ì´ëª¨ì§€ ìë™ í‘œì‹œ
- **@ë©˜ì…˜ ì‹œìŠ¤í…œ**: í˜ë¥´ì†Œë‚˜ ì´ë¦„Â·ì—­í• Â·ë©¤ë²„ IDë¡œ @ë©˜ì…˜ â†’ ë©˜ì…˜ í ì €ì¥ â†’ `slack_mention_check`ë¡œ ìˆ˜ì‹  í™•ì¸
- **ë¦¬ì•¡ì…˜-ì»¤ë§¨ë“œ**: Slack ì´ëª¨ì§€ ë¦¬ì•¡ì…˜(âœ…âŒğŸš€ğŸ”„ğŸ—‘ï¸â“)ì„ ì»¤ë§¨ë“œë¡œ ìë™ ë³€í™˜- **ì˜êµ¬ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬**: SQLite ê¸°ë°˜ íƒœìŠ¤í¬/ì˜ì‚¬ê²°ì •/ì—ì´ì „íŠ¸ ì»¨í…ìŠ¤íŠ¸ ì €ì¥ â€” ì»¨í…ìŠ¤íŠ¸ ì••ì¶• í›„ ì¦‰ì‹œ ë³µêµ¬
- **í•« ë¦¬ë¡œë“œ**: `slack_reload`ë¡œ TypeScript ë¹Œë“œ + ì„œë²„ ì¬ì‹œì‘ â€” wrapper.jsë¡œ Claude Code ì—°ê²° ìœ ì§€
- **ìŠ¹ì¸ í›…**: ìœ„í—˜ ëª…ë ¹(git push, rm ë“±) + MCP ë„êµ¬ + ê¶Œí•œ ìš”ì²­ ëª¨ë‘ Slack ìŠ¹ì¸ ì§€ì›, ì•ˆì „ ëª…ë ¹ ìë™ ë°”ì´íŒ¨ìŠ¤
- **íŒŒì¼ ì „ì†¡**: Slack íŒŒì¼ ë‹¤ìš´ë¡œë“œ/ì—…ë¡œë“œ (ì´ë¯¸ì§€, ë¬¸ì„œ, ë¡œê·¸ ë“±)
- **ë…¼ë¸”ë¡œí‚¹ ëª¨ë“œ**: `slack_command_loop(timeout=0)`, `slack_team_wait(timeout=0)`ìœ¼ë¡œ ì‘ì—… ì¤‘ì—ë„ Slack ëª…ë ¹ ë†“ì¹¨ ë°©ì§€
- **ë©€í‹°í”„ë¡œì„¸ìŠ¤ ì•ˆì „**: SQLite WAL + busy_timeout + í´ëŸ¬ DB ë¦¬ìŠ¤ + íŒ€ë³„ ê°œë³„ ì €ì¥ â€” ì—¬ëŸ¬ ì—ì´ì „íŠ¸ê°€ ë™ì‹œ ì ‘ê·¼í•´ë„ ë°ì´í„° ì†ì‹¤ ì—†ìŒ
- **state.json â†’ SQLite ì´ê´€**: ëª¨ë“  ìƒíƒœ(teams, loop) SQLite ì˜êµ¬ ì €ì¥, ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜
- **ì„¸ì…˜ ë³µêµ¬**: compact/ì¬ì‹œì‘ í›„ `slack_whoami`ë¡œ ì¦‰ì‹œ ë³µêµ¬

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ index.ts               # ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ (ë„êµ¬ ë“±ë¡ + ì„œë²„ ì‹œì‘)
â”œâ”€â”€ wrapper.ts             # ìë™ ì¬ì‹œì‘ ë˜í¼ (exit 42 â†’ í•« ë¦¬ë¡œë“œ)
â”œâ”€â”€ background-poller.ts   # ë°±ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ ìˆ˜ì§‘ê¸° (10ì´ˆ ê°„ê²©)
â”œâ”€â”€ types.ts               # ì¸í„°í˜ì´ìŠ¤, ìƒìˆ˜, íƒ€ì… ì •ì˜ + ì—ì´ì „íŠ¸ í˜ë¥´ì†Œë‚˜
â”œâ”€â”€ db.ts                  # SQLite ì´ˆê¸°í™” + ë°ì´í„° ì ‘ê·¼ í—¬í¼
â”œâ”€â”€ state.ts               # SQLite ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬ + íŒ€ ë ˆì§€ìŠ¤íŠ¸ë¦¬
â”œâ”€â”€ slack-client.ts        # WebClient + sendSmart + ë©”ì‹œì§€ ë¶„í• 
â”œâ”€â”€ formatting.ts          # ë©”ì‹œì§€ í¬ë§· + ë¦¬ì¹˜ í¬ë§·íŒ… ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ rate-limiter.ts        # ì¤‘ì•™ì§‘ì¤‘ Rate Limiter (í† í° ë²„í‚· + ìë™ ë°±ì˜¤í”„)
â”œâ”€â”€ approval-hook.ts       # ë²”ìš© Slack ìŠ¹ì¸ í›… (Bash + ë„êµ¬ + ê¶Œí•œ)
â””â”€â”€ tools/
    â”œâ”€â”€ basic.ts           # ê¸°ë³¸ í†µì‹  + ë¦¬ì•¡ì…˜ ê´€ë¦¬ + ì§„ë‹¨ (11ê°œ ë„êµ¬)
    â”œâ”€â”€ content.ts         # ì½”ë“œ/ìŠ¤ë‹ˆí« ì—…ë¡œë“œ (2ê°œ ë„êµ¬)
    â”œâ”€â”€ loop.ts            # ëª…ë ¹ ë£¨í”„ + ì¸ë°•ìŠ¤ + ë¦¬ì•¡ì…˜ ì»¤ë§¨ë“œ (3ê°œ ë„êµ¬)
    â”œâ”€â”€ team.ts            # íŒ€ ê´€ë¦¬ + ë©˜ì…˜ + ì•Œë¦¼ í†µí•© (14ê°œ ë„êµ¬)
    â”œâ”€â”€ context.ts         # íŒ€ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ + whoami (8ê°œ ë„êµ¬)
    â”œâ”€â”€ approval.ts        # ìŠ¹ì¸ ìš”ì²­ (1ê°œ ë„êµ¬)
    â”œâ”€â”€ file.ts            # íŒŒì¼ ë‹¤ìš´ë¡œë“œ/ì—…ë¡œë“œ (2ê°œ ë„êµ¬)
    â”œâ”€â”€ state.ts           # ìƒíƒœ ì €ì¥/ë³µì› + ë¹„ìš© ë³´ê³  (3ê°œ ë„êµ¬)
    â””â”€â”€ dashboard.ts       # ëŒ€ì‹œë³´ë“œ + í•˜íŠ¸ë¹„íŠ¸ + DM + ì˜ˆì•½/ê¶Œí•œ (11ê°œ ë„êµ¬)
```

## ì›Œí¬í”Œë¡œìš°

```
ì‚¬ìš©ì (Slack)             Agent (Claude Code)
    â”‚                            â”‚
    â”œâ”€â”€â”€ ëª…ë ¹ ì…ë ¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  slack_read_messages / slack_command_loop
    â”‚                            â”œâ”€â”€ ìˆ˜ì‹  í™•ì¸ ë¦¬ì•¡ì…˜ (ğŸ‘€)
    â”‚                            â”œâ”€â”€ ì‘ì—… ìˆ˜í–‰
    â”‚                            â”œâ”€â”€ ê²°ê³¼ ì „ì†¡ (slack_reply_thread)
    â”‚â†â”€â”€ ê²°ê³¼ ìˆ˜ì‹  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  ì™„ë£Œ ë¦¬ì•¡ì…˜ (âœ…)
    â”œâ”€â”€â”€ í”¼ë“œë°± â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  slack_wait_for_reply
    â”‚                            â”œâ”€â”€ í”¼ë“œë°± ë°˜ì˜
    â”‚                            â””â”€â”€ ë‹¤ìŒ ëª…ë ¹ ëŒ€ê¸° (ë£¨í”„)
```

## ë¹ ë¥¸ ì‹œì‘

### 1. ì„¤ì¹˜

```bash
git clone https://github.com/berrzebb/mcp-slack-agent-team.git
cd mcp-slack-agent-team/mcp-servers/slack
npm install
npm run build
```

### 2. Slack App ìƒì„± ë° ì„¤ì •

1. [Slack API](https://api.slack.com/apps)ì—ì„œ ìƒˆ Appì„ ìƒì„±í•©ë‹ˆë‹¤.
2. **OAuth & Permissions â†’ Bot Token Scopes**ì—ì„œ ì•„ë˜ [í•„ìš” ê¶Œí•œ](#í•„ìš”í•œ-bot-token-scopes)ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
3. Appì„ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì— ì„¤ì¹˜í•˜ê³  **Bot User OAuth Token** (`xoxb-...`)ì„ ë³µì‚¬í•©ë‹ˆë‹¤.
4. Slackì—ì„œ ë´‡ì„ ì‚¬ìš©í•  ì±„ë„ì— `/invite @ë´‡ì´ë¦„`ìœ¼ë¡œ ë´‡ì„ ì´ˆëŒ€í•©ë‹ˆë‹¤.
5. í•´ë‹¹ ì±„ë„ì˜ **ì±„ë„ ID**ë¥¼ í™•ì¸í•©ë‹ˆë‹¤ (ì±„ë„ ì´ë¦„ ìš°í´ë¦­ â†’ ë§í¬ ë³µì‚¬ â†’ ë§ˆì§€ë§‰ ê²½ë¡œ).

### 3. ì—°ê²° í…ŒìŠ¤íŠ¸

```bash
# .env íŒŒì¼ ìƒì„±
cp .env.example .env
# .env íŒŒì¼ì— ì‹¤ì œ í† í°ê³¼ ì±„ë„ ID ì…ë ¥ í›„:

npx tsx src/test.ts
```

í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ë©´ ë‹¤ìŒ ì¶œë ¥ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤:

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Slack MCP Server - ì—°ê²° í…ŒìŠ¤íŠ¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  Bot ì¸ì¦ í™•ì¸...       âœ… ì¸ì¦ ì„±ê³µ
2ï¸âƒ£  ì±„ë„ ì ‘ê·¼ í™•ì¸...       âœ… ì±„ë„: #your-channel
3ï¸âƒ£  ë©”ì‹œì§€ ì „ì†¡ í…ŒìŠ¤íŠ¸...   âœ… ë©”ì‹œì§€ ì „ì†¡ ì„±ê³µ
4ï¸âƒ£  ë©”ì‹œì§€ ì½ê¸° í…ŒìŠ¤íŠ¸...   âœ… ìµœê·¼ 3ê°œ ë©”ì‹œì§€ ì½ê¸° ì„±ê³µ
5ï¸âƒ£  ë¦¬ì•¡ì…˜ í…ŒìŠ¤íŠ¸...        âœ… ë¦¬ì•¡ì…˜ ì¶”ê°€ ì„±ê³µ

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 4. Claude Code MCP ì„œë²„ ë“±ë¡

í”„ë¡œì íŠ¸ì˜ `.claude/settings.json` ë˜ëŠ” ì‚¬ìš©ì ì „ì—­ ì„¤ì • `~/.claude.json`ì— ì¶”ê°€í•©ë‹ˆë‹¤:

```json
{
  "mcpServers": {
    "slack": {
      "command": "node",
      "args": ["path/to/slack-mcp-server/dist/wrapper.js"],
      "env": {
        "SLACK_BOT_TOKEN": "xoxb-your-bot-token",
        "SLACK_DEFAULT_CHANNEL": "Cì±„ë„ID"
      }
    }
  }
}
```

> **ê°œë°œ ì¤‘**ì—ëŠ” ë¹Œë“œ ì—†ì´ `tsx`ë¡œ ì§ì ‘ ì‹¤í–‰ ê°€ëŠ¥:
> ```json
> {
>   "mcpServers": {
>     "slack": {
>       "command": "npx",
>       "args": ["tsx", "path/to/slack-mcp-server/src/index.ts"],
>       "env": {
>         "SLACK_BOT_TOKEN": "xoxb-your-bot-token",
>         "SLACK_DEFAULT_CHANNEL": "Cì±„ë„ID",
>         "BG_POLL_INTERVAL": "10000"
>       }
>     }
>   }
> }
> ```
>
> **wrapper.js ì—†ì´** ì§ì ‘ ì‹¤í–‰ ì‹œ `slack_reload`ì€ ì‚¬ìš©í•  ìˆ˜ ì—†ì§€ë§Œ ë‹¤ë¥¸ ëª¨ë“  ê¸°ëŠ¥ì€ ë™ì¼í•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤:
> ```json
> {
>   "mcpServers": {
>     "slack": {
>       "command": "node",
>       "args": ["path/to/slack-mcp-server/dist/index.js"],
>       "env": {
>         "SLACK_BOT_TOKEN": "xoxb-your-bot-token",
>         "SLACK_DEFAULT_CHANNEL": "Cì±„ë„ID"
>       }
>     }
>   }
> }
> ```

### 5. (ì„ íƒ) ìŠ¹ì¸ í›… ì„¤ì •

ìœ„í—˜í•œ Bash ëª…ë ¹, MCP ë„êµ¬, ê¶Œí•œ ìš”ì²­ì„ ì‹¤í–‰í•˜ê¸° ì „ì— Slackì—ì„œ ì‚¬ìš©ì ìŠ¹ì¸ì„ ìš”ì²­í•˜ëŠ” í›…ì…ë‹ˆë‹¤.

**ì§€ì› í›… ì´ë²¤íŠ¸**: `PreToolUse` (Bash ëª…ë ¹ + MCP ë„êµ¬), `PermissionRequest` (ê¶Œí•œ ìš”ì²­)

**ì•ˆì „ ëª…ë ¹ ìë™ ë°”ì´íŒ¨ìŠ¤**: `cargo`, `npm`, `node`, `git status/diff/log/add/commit`, `echo`, `cat`, `head`, `tail`, `wc`, `find`, `ls` ë“± ~30ì¢… íŒ¨í„´ì€ Slack ìŠ¹ì¸ ì—†ì´ ìë™ í—ˆìš©

`.claude/settings.json`ì— ì¶”ê°€:

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node path/to/slack-mcp-server/dist/approval-hook.js"
          }
        ]
      }
    ],
    "PermissionRequest": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "node path/to/slack-mcp-server/dist/approval-hook.js"
          }
        ]
      }
    ]
  }
}
```

ìœ„í—˜ ëª…ë ¹ ê°ì§€ ì‹œ Slack ì±„ë„ì— ìŠ¹ì¸ ìš”ì²­ì´ ì „ì†¡ë©ë‹ˆë‹¤:

- ğŸš¨ **DANGEROUS** (ë°ì´í„° ì‚­ì œ, ê°•ì œ í‘¸ì‹œ ë“±) / âš ï¸ **Approval Required** (ì¼ë°˜ ìœ„í—˜ ëª…ë ¹)
- âœ… ë¦¬ì•¡ì…˜ ë˜ëŠ” ìŠ¤ë ˆë“œì— `y` â†’ **ìŠ¹ì¸** (ëª…ë ¹ ì‹¤í–‰)
- âŒ ë¦¬ì•¡ì…˜ ë˜ëŠ” ìŠ¤ë ˆë“œì— `n` â†’ **ê±°ë¶€** (ëª…ë ¹ ì°¨ë‹¨)
- íƒ€ì„ì•„ì›ƒ (ê¸°ë³¸ 120ì´ˆ) â†’ **ìë™ ê±°ë¶€**
- ì˜¤ë¥˜ ë°œìƒ ì‹œ â†’ ê¸°ë³¸ ê¶Œí•œ ì‹œìŠ¤í…œìœ¼ë¡œ í´ë°± (í•˜ë“œ ê±°ë¶€ ëŒ€ì‹ )

## í•„ìš”í•œ Bot Token Scopes

Slack App â†’ OAuth & Permissions â†’ Bot Token Scopes:

| Scope | ìš©ë„ | í•„ìš” ê¸°ëŠ¥ |
|-------|------|-----------|
| `chat:write` | ë©”ì‹œì§€ ì „ì†¡ | ì „ì²´ |
| `chat:write.customize` | ì—ì´ì „íŠ¸ ì—­í• ë³„ ì´ë¦„/ì•„ì´ì½˜ìœ¼ë¡œ ì „ì†¡ | íŒ€ ê´€ë¦¬ |
| `channels:history` | ê³µê°œ ì±„ë„ ë©”ì‹œì§€ ì½ê¸° | ì „ì²´ |
| `groups:history` | ë¹„ê³µê°œ ì±„ë„ ë©”ì‹œì§€ ì½ê¸° | ë¹„ê³µê°œ ì±„ë„ ì‚¬ìš© ì‹œ |
| `reactions:write` | ë¦¬ì•¡ì…˜ ì¶”ê°€ (ìˆ˜ì‹  í™•ì¸ ğŸ‘€, ì™„ë£Œ âœ…) | ì „ì²´ |
| `reactions:read` | ë¦¬ì•¡ì…˜ ì½ê¸° (ìŠ¹ì¸ í›…ì˜ ìŠ¹ì¸/ê±°ë¶€ í™•ì¸) | ìŠ¹ì¸ í›… |
| `channels:read` | ê³µê°œ ì±„ë„ ëª©ë¡ ì¡°íšŒ | `slack_list_channels` |
| `groups:read` | ë¹„ê³µê°œ ì±„ë„ ëª©ë¡ ì¡°íšŒ | `slack_list_channels` |
| `channels:manage` | ì±„ë„ ìƒì„±, ì£¼ì œ ì„¤ì •, ì•„ì¹´ì´ë¸Œ | íŒ€ ê´€ë¦¬ |
| `channels:join` | ì±„ë„ ìë™ ì°¸ê°€ | íŒ€ ê´€ë¦¬ |
| `users:read` | ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ | ë´‡ ID ìë™ ê°ì§€ |
| `files:write` | ì½”ë“œ/ë¡œê·¸ íŒŒì¼ ì—…ë¡œë“œ | `slack_upload_snippet`, `slack_send_code`, ê¸´ ë©”ì‹œì§€ ìë™ ì—…ë¡œë“œ |
| `pins:write` | ë©”ì‹œì§€ ê³ ì •/í•´ì œ | `slack_pin_message` |
| `im:write` | DM ì±„ë„ ì—´ê¸° + ì „ì†¡ | `slack_send_dm` |

> **ìµœì†Œ êµ¬ì„±** (ê¸°ë³¸ í†µì‹ ë§Œ): `chat:write`, `channels:history`, `reactions:write`, `users:read`
>
> **íŒ€ ê´€ë¦¬ ì¶”ê°€**: + `chat:write.customize`, `channels:manage`, `channels:join`
>
> **íŒ€ ë³´ê³  + ìŠ¹ì¸ ê¸°ëŠ¥**: + `reactions:read` (ìŠ¹ì¸ ë¦¬ì•¡ì…˜ ê°ì§€)
>
> **ìŠ¹ì¸ í›… ì¶”ê°€**: + `reactions:read`
>
> **ëŒ€ì‹œë³´ë“œ/DM ì¶”ê°€**: + `pins:write`, `im:write`

## ì œê³µ ë„êµ¬ (55ê°œ)

### ê¸°ë³¸ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ + ë¦¬ì•¡ì…˜ (11ê°œ)

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_send_message` | ì±„ë„ì— ë©”ì‹œì§€ ì „ì†¡ (ê¸´ ë©”ì‹œì§€ ìë™ ë¶„í• /íŒŒì¼ ì—…ë¡œë“œ) |
| `slack_respond` | ìë™ ë¼ìš°íŒ… ì‘ë‹µ â€” thread_ts ìœ ë¬´ë¡œ ìŠ¤ë ˆë“œ/ì±„ë„ ìë™ ê´€ë‹¨ (reply_mode ì§€ì›) |
| `slack_update_message` | ë³´ë‚¸ ë©”ì‹œì§€ ìˆ˜ì • (ì§„í–‰ ìƒíƒœ ì—…ë°ì´íŠ¸, ì˜¤íƒ€ ìˆ˜ì •) |
| `slack_read_messages` | ì±„ë„ì˜ ìµœê·¼ ë©”ì‹œì§€ ì½ê¸° |
| `slack_reply_thread` | ìŠ¤ë ˆë“œì— ë‹µì¥ |
| `slack_add_reaction` | ì´ëª¨ì§€ ë¦¬ì•¡ì…˜ ì¶”ê°€ (ğŸ‘€ í™•ì¸, âœ… ì™„ë£Œ, ğŸš€ ì‹œì‘, ğŸ”¥ ê¸´ê¸‰, â³ ì§„í–‰ì¤‘, ğŸ‰ ì¶•í•˜, ğŸ“ ê²€í†  ë“±) |
| `slack_remove_reaction` | ë¦¬ì•¡ì…˜ ì œê±° (ìƒíƒœ ë³€ê²½ ì‹œ ì´ì „ ë¦¬ì•¡ì…˜ ì •ë¦¬: â³â†’âœ…) |
| `slack_list_channels` | ì ‘ê·¼ ê°€ëŠ¥í•œ ì±„ë„ ëª©ë¡ ì¡°íšŒ |
| `slack_get_thread` | ìŠ¤ë ˆë“œ ì „ì²´ ì½ê¸° |
| `slack_reload` | MCP ì„œë²„ í•« ë¦¬ë¡œë“œ (TypeScript ë¹Œë“œ + ì¬ì‹œì‘, wrapper.js í•„ìš”) |
| `slack_inbox_status` | ì¸ë°•ìŠ¤ ì§„ë‹¨ â€” ì»¤ì„œ, ë¯¸ì½ ê±´ìˆ˜, ê°ì‹œ ìŠ¤ë ˆë“œ, ê±´ê°• ìƒíƒœ í™•ì¸ |

### ì»¨í…ì¸  ì²˜ë¦¬ (2ê°œ)

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_upload_snippet` | ì½”ë“œ/ë¡œê·¸ë¥¼ íŒŒì¼ë¡œ ì—…ë¡œë“œ (ê¸¸ì´ ì œí•œ ì—†ìŒ) |
| `slack_send_code` | ì½”ë“œ ë¸”ë¡ ì „ì†¡ (syntax highlight, ê¸´ ì½”ë“œëŠ” ìë™ íŒŒì¼ ì—…ë¡œë“œ) |

### ëª…ë ¹ ë£¨í”„ + ì¸ë°•ìŠ¤ (3ê°œ)

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_command_loop` | Slackì—ì„œ ì‚¬ìš©ì ëª…ë ¹ ëŒ€ê¸° (timeout=0: ë…¼ë¸”ë¡œí‚¹ 1íšŒ ì²´í¬, timeout>0: í´ë§) |
| `slack_check_inbox` | SQLite ì¸ë°•ìŠ¤ì—ì„œ ë¯¸ì½ ë©”ì‹œì§€ í™•ì¸ (fresh=trueë¡œ ì¦‰ì‹œ í´ë§ ê°€ëŠ¥) |
| `slack_wait_for_reply` | ìŠ¤ë ˆë“œ/ì±„ë„ì—ì„œ ìƒˆ ë©”ì‹œì§€ ëŒ€ê¸° |

### ì—ì´ì „íŠ¸ íŒ€ ê´€ë¦¬ + ì•Œë¦¼ í†µí•© (14ê°œ)

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_team_create` | íŒ€ ì „ìš© ì±„ë„ ìƒì„± + ì´ˆê¸° ë©¤ë²„ ë“±ë¡ (ì´ë¦„ ì¶©ëŒ ì‹œ ê¸°ì¡´ ì±„ë„ ì¬ì‚¬ìš©) |
| `slack_team_register` | ê¸°ì¡´ íŒ€ì— ìƒˆ ë©¤ë²„ ì¶”ê°€ |
| `slack_team_send` | í˜ë¥´ì†Œë‚˜ ì´ë¦„/ì•„ì´ì½˜ìœ¼ë¡œ ë©”ì‹œì§€ ì „ì†¡ (@ë©˜ì…˜ â†’ ë©˜ì…˜ í ì €ì¥) |
| `slack_team_read` | íŒ€ ì±„ë„ ë©”ì‹œì§€ ì½ê¸° (ì¸ë°•ìŠ¤ ìš°ì„  0 API, fresh=trueë¡œ API fallback) |
| `slack_team_wait` | íŒ€ ì±„ë„ ìƒˆ ë©”ì‹œì§€ ëŒ€ê¸° (timeout=0: ë…¼ë¸”ë¡œí‚¹, ì¸ë°•ìŠ¤+API staggered) |
| `slack_team_thread` | íŒ€ ìŠ¤ë ˆë“œ ì½ê¸°/ë‹µì¥ |
| `slack_team_status` | íŒ€ í˜„í™©/ë©¤ë²„ ëª©ë¡ ì¡°íšŒ |
| `slack_team_broadcast` | íŒ€ ì „ì²´ ë¸Œë¡œë“œìºìŠ¤íŠ¸ |
| `slack_team_report` | íŒ€ì›ì´ ë©”ì¸ ì±„ë„ + íŒ€ ì±„ë„ì— ì‘ì—… ìƒí™© ë³´ê³  (íŒ€ ë©”ëª¨ë¦¬ ì—†ì„ ì‹œ SQLite fallback) |
| `slack_team_close` | ì±„ë„ ì•„ì¹´ì´ë¸Œ + ìµœì¢… ìš”ì•½ + íƒœìŠ¤í¬ ì¼ê´„ ì™„ë£Œ |
| `slack_mention_check` | @ë©˜ì…˜ ìˆ˜ì‹  í™•ì¸ â€” ë©¤ë²„ IDÂ·ì—­í• Â·í˜ë¥´ì†Œë‚˜ ì´ë¦„ìœ¼ë¡œ ë©˜ì…˜ í ì¡°íšŒ (peek ëª¨ë“œ ì§€ì›) |
| `slack_check_all_notifications` | ëª¨ë“  ì•Œë¦¼ í†µí•© í™•ì¸ â€” ë©˜ì…˜, ê¶Œí•œìš”ì²­, íŒ€ ë¯¸ì½, ë©”ì¸ì±„ë„ (0 API í˜¸ì¶œ, SQLiteë§Œ ì‚¬ìš©) |
| `slack_team_update_message` | íŒ€ ì±„ë„ì—ì„œ ìì‹ ì´ ë³´ë‚¸ ë©”ì‹œì§€ ìˆ˜ì • (ìƒíƒœ ì—…ë°ì´íŠ¸, ê²°ê³¼ ì¶”ê°€) |
| `slack_team_delete_message` | íŒ€ ì±„ë„ì—ì„œ ìì‹ ì´ ë³´ë‚¸ ë©”ì‹œì§€ ì‚­ì œ (ì˜ëª»ëœ/ì¤‘ë³µ ë©”ì‹œì§€ ì •ë¦¬) |

### íŒ€ ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ (8ê°œ)

> SQLite ê¸°ë°˜ ì˜êµ¬ ì €ì¥ì†Œ. ì»¨í…ìŠ¤íŠ¸ ì••ì¶•(compaction) í›„ì—ë„ ìœ ì§€ë˜ì–´ **~92% í† í° ì ˆê°**.

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_team_assign_task` | êµ¬ì¡°í™”ëœ íƒœìŠ¤í¬ í• ë‹¹ (ì˜ì¡´ì„± DAG, ìë™ ë¸”ë¡œí‚¹/ì–¸ë¸”ë¡œí‚¹) |
| `slack_team_update_task` | íƒœìŠ¤í¬ ìƒíƒœ ë³€ê²½ + ì™„ë£Œ ì‹œ ì˜ì¡´ íƒœìŠ¤í¬ ìë™ unblock |
| `slack_team_list_tasks` | íƒœìŠ¤í¬ ëª©ë¡ ì¡°íšŒ (ì—ì´ì „íŠ¸/ìƒíƒœ/íŠ¸ë™ í•„í„°) |
| `slack_team_save_context` | ì—ì´ì „íŠ¸ ì»¨í…ìŠ¤íŠ¸ SQLite ì €ì¥ (ì••ì¶• ì „ í˜¸ì¶œ) |
| `slack_team_get_context` | **ì••ì¶• í›„ ì¦‰ì‹œ ë³µêµ¬** â€” íƒœìŠ¤í¬ + ê²°ì • + ìŠ¤ëƒ…ìƒ· ì›ìƒ· ë°˜í™˜ |
| `slack_team_log_decision` | ì˜ì‚¬ê²°ì • ì˜êµ¬ ê¸°ë¡ (ìŠ¹ì¸/ì„¤ê³„/ìš°ì„ ìˆœìœ„/ì°¨ë‹¨) |
| `slack_team_decisions` | ì˜ì‚¬ê²°ì • ì´ë ¥ ì¡°íšŒ (ì¤‘ë³µ ì§ˆë¬¸/ìŠ¹ì¸ ë°©ì§€) |
| `slack_whoami` | ğŸ”‘ compact/ì¬ì‹œì‘ í›„ ìµœìš°ì„  í˜¸ì¶œ â€” ëª¨ë“  í™œì„± íŒ€Â·ì»¨í…ìŠ¤íŠ¸Â·íƒœìŠ¤í¬Â·ì›Œí¬í”Œë¡œìš° í•œ ë²ˆì— ë°˜í™˜ |

### ìŠ¹ì¸/í™•ì¸ (1ê°œ)

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_request_approval` | ì‚¬ìš©ìì—ê²Œ ìŠ¹ì¸ ìš”ì²­ í›„ âœ…/âŒ ëŒ€ê¸° (ê²°ê³¼ ìë™ ì˜ì‚¬ê²°ì • ê¸°ë¡) |

### íŒŒì¼ ì „ì†¡ (2ê°œ)

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_download_file` | Slack íŒŒì¼ì„ ë¡œì»¬ì— ë‹¤ìš´ë¡œë“œ |
| `slack_upload_file` | ë¡œì»¬ íŒŒì¼ì„ Slackì— ì—…ë¡œë“œ |

### ìƒíƒœ ê´€ë¦¬ + ë¹„ìš© (3ê°œ)

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_save_state` | ë£¨í”„/íŒ€ ìƒíƒœë¥¼ SQLiteì— ì €ì¥ (ì„¸ì…˜ ë³µêµ¬ìš©) |
| `slack_load_state` | ì €ì¥ëœ ìƒíƒœ ë³µì› + íŒ€ ì»¨í…ìŠ¤íŠ¸ ìš”ì•½ í¬í•¨ |
| `slack_cost_report` | ccusageë¡œ Claude Code í† í°/ë¹„ìš© ë³´ê³  (ì¼ë³„/ì›”ë³„) |

### ëŒ€ì‹œë³´ë“œ + ìš´ì˜ (11ê°œ)

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `slack_progress_dashboard` | íŒ€ ì‘ì—… ì§„í–‰ë¥  ì‹œê°ì  ëŒ€ì‹œë³´ë“œ (ì§„í–‰ ë°”, ì—ì´ì „íŠ¸ ìƒíƒœ, Rate Limiter ë©”íŠ¸ë¦­) |
| `slack_heartbeat` | ì—ì´ì „íŠ¸ ìƒì¡´ ì‹ í˜¸(í•˜íŠ¸ë¹„íŠ¸) ì „ì†¡ |
| `slack_heartbeat_status` | ëª¨ë“  ì—ì´ì „íŠ¸ í•˜íŠ¸ë¹„íŠ¸ ìƒíƒœ ì¡°íšŒ + ë¬´ì‘ë‹µ ê°ì§€ ì•Œë¦¼ |
| `slack_thread_summary` | ê¸´ ìŠ¤ë ˆë“œ ìë™ ìš”ì•½ (ì£¼ìš” ë©”ì‹œì§€ ì¶”ì¶œ, ì°¸ì—¬ì í†µê³„) |
| `slack_search_inbox` | ì¸ë°•ìŠ¤ ë©”ì‹œì§€ FTS5 ì „ë¬¸ê²€ìƒ‰ |
| `slack_pin_message` | ë©”ì‹œì§€ ê³ ì •/í•´ì œ |
| `slack_send_dm` | ë‹¤ì´ë ‰íŠ¸ ë©”ì‹œì§€(DM) ì „ì†¡ |
| `slack_schedule_message` | ì˜ˆì•½ ì‹œê°„ì— ë©”ì‹œì§€ ì „ì†¡ (ë¦¬ë§ˆì¸ë”, ì •ê¸° ë³´ê³ ) |
| `slack_team_request_permission` | íŒ€ì›â†’ë¦¬ë” ìœ„í—˜ ì‘ì—… ìŠ¹ì¸ ìš”ì²­ (ê¸°ë³¸ ì‘ì—… ìë™ í—ˆìš©, staggered í´ë§) |
| `slack_list_permissions` | ëŒ€ê¸° ì¤‘ì¸ ê¶Œí•œ ìš”ì²­ ëª©ë¡ ì¡°íšŒ |
| `slack_resolve_permission` | ë¦¬ë”/ì„œë¸Œë¦¬ë”ê°€ íŒ€ì› ê¶Œí•œ ìš”ì²­ ìŠ¹ì¸/ê±°ë¶€ (DB ê²°ì • â†’ ìš”ì²­ì ìë™ ê°ì§€) |

## ì‚¬ìš© ì˜ˆì‹œ

### 1. Slack ì›ê²© ì œì–´ (ê¸°ë³¸)

```
Agent: slack_command_loop()                        # ëª…ë ¹ ëŒ€ê¸°
User (Slack): "ì—ëŸ¬ ì›ì¸ ì°¾ì•„ì¤˜"
Agent: slack_add_reaction(ts, "eyes")              # ìˆ˜ì‹  í™•ì¸
Agent: (ì½”ë“œ ë¶„ì„ ìˆ˜í–‰)
Agent: slack_reply_thread(ts, "ì›ì¸: ...")          # ê²°ê³¼ ë³´ê³ 
Agent: slack_add_reaction(ts, "white_check_mark")  # ì™„ë£Œ
Agent: slack_command_loop(since_ts=ts)              # ë‹¤ìŒ ëª…ë ¹ ëŒ€ê¸°
```

### 2. í”¼ë“œë°± ëŒ€ê¸°

```
Agent: slack_send_message("ì‘ì—… ì™„ë£Œ. ê²€í†  ë¶€íƒë“œë¦½ë‹ˆë‹¤.")
Agent: slack_wait_for_reply(timeout=120)            # ì‚¬ìš©ì í”¼ë“œë°± ëŒ€ê¸°
Agent: (í”¼ë“œë°± ìˆ˜ì‹  í›„ ë°˜ì˜)
```

### 3. ì—ì´ì „íŠ¸ íŒ€ ì›Œí¬í”Œë¡œìš°

```
â”€â”€ íŒ€ ìƒì„± â”€â”€
slack_team_create(
  team_id: "T12",
  team_name: "Feature X êµ¬í˜„",
  members: [
    { id: "lead", role: "lead", agent_type: "planner" },
    { id: "sub-leader-A", role: "sub-leader", agent_type: "planner", track: "A" },
    { id: "worker-A", role: "implementer", agent_type: "implementer", track: "A" },
    { id: "sub-leader-B", role: "sub-leader", agent_type: "planner", track: "B" },
    { id: "worker-B", role: "implementer", agent_type: "implementer", track: "B" }
  ]
)

â”€â”€ êµ¬ì¡°í™”ëœ íƒœìŠ¤í¬ í• ë‹¹ (SQLite ì˜êµ¬ ì €ì¥) â”€â”€
slack_team_assign_task(
  team_id: "T12", task_id: "T1",
  title: "OrderValidator êµ¬í˜„",
  description: "ì£¼ë¬¸ ìœ íš¨ì„± ê²€ì¦ê¸° êµ¬í˜„ + ë‹¨ìœ„ í…ŒìŠ¤íŠ¸",
  assigned_to: "worker-A", assigned_by: "sub-leader-A",
  track: "A"
)
slack_team_assign_task(
  team_id: "T12", task_id: "T2",
  title: "OrderExecutor êµ¬í˜„",
  description: "ì£¼ë¬¸ ì‹¤í–‰ê¸°. T1 ì™„ë£Œ í›„ ì‹œì‘",
  assigned_to: "worker-A", assigned_by: "sub-leader-A",
  dependencies: ["T1"]   # T1 ì™„ë£Œê¹Œì§€ ìë™ ëŒ€ê¸°
)

â”€â”€ íƒœìŠ¤í¬ ì™„ë£Œ ë³´ê³  (ìë™ìœ¼ë¡œ T2 unblock) â”€â”€
slack_team_update_task(
  team_id: "T12", task_id: "T1",
  status: "done",
  result_summary: "OrderValidator êµ¬í˜„ ì™„ë£Œ. 15ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼.",
  sender: "worker-A"
)

â”€â”€ ì»¨í…ìŠ¤íŠ¸ ì••ì¶• ì „ ì €ì¥ â”€â”€
slack_team_save_context(
  team_id: "T12", agent_id: "worker-A",
  current_task_id: "T2",
  context: {
    goal: "OrderExecutor êµ¬í˜„",
    progress: "30% â€” ê¸°ë³¸ êµ¬ì¡° ì™„ì„±, ì—ëŸ¬ í•¸ë“¤ë§ ì‘ì—… ì¤‘",
    notes: "T1ì˜ ValidationResult íƒ€ì…ì„ ì¬ì‚¬ìš©",
    next_steps: ["retry ë¡œì§ ì¶”ê°€", "í†µí•© í…ŒìŠ¤íŠ¸"]
  }
)

â”€â”€ [ì»¨í…ìŠ¤íŠ¸ ì••ì¶• ë°œìƒ] â”€â”€

â”€â”€ ì••ì¶• í›„ ì¦‰ì‹œ ë³µêµ¬ (Slack íˆìŠ¤í† ë¦¬ ì¬ì½ê¸° ë¶ˆí•„ìš”!) â”€â”€
slack_team_get_context(team_id: "T12", agent_id: "worker-A")
â†’ íƒœìŠ¤í¬ ëª©ë¡ + ì €ì¥ëœ ì»¨í…ìŠ¤íŠ¸ + ì˜ì‚¬ê²°ì • ì´ë ¥ ì›ìƒ· ë°˜í™˜

â”€â”€ ì˜ì‚¬ê²°ì • ê¸°ë¡ (ì¤‘ë³µ ìŠ¹ì¸ ìš”ì²­ ë°©ì§€) â”€â”€
slack_team_log_decision(
  team_id: "T12", decision_type: "design",
  question: "ì—ëŸ¬ íƒ€ì…ì„ enum vs trait object ì¤‘ ì–´ë–¤ ê²ƒìœ¼ë¡œ?",
  answer: "trait object â€” í™•ì¥ì„± ìš°ì„ ",
  decided_by: "lead"
)

â”€â”€ íŒ€ ì¢…ë£Œ â”€â”€
slack_team_close(team_id: "T12", summary: "ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ. 15ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼.")
```

**Slackì—ì„œ ì‚¬ìš©ìê°€ ë³´ëŠ” ëª¨ìŠµ:**

```
#team-t12 ì±„ë„:
  ğŸš€ íŒ€ T12 í™œì„±í™”: Feature X êµ¬í˜„
  ë©¤ë²„ (5ëª…):
    ğŸ‘‘ lead â€” planner
    ğŸ¯ sub-leader-A â€” planner [Track A]
    ğŸ”¨ worker-A â€” implementer [Track A]
    ğŸ¯ sub-leader-B â€” planner [Track B]
    ğŸ”¨ worker-B â€” implementer [Track B]

  ğŸ”¨ *worker-A* [A] âœ…
  êµ¬í˜„ ì™„ë£Œ

  ğŸ“¢ *[BROADCAST]* ğŸ‘‘ *lead*
  Track A ì™„ë£Œ. Track B ì‹œì‘ ê°€ëŠ¥.

  ğŸ‰ íŒ€ T12 ì‘ì—… ì™„ë£Œ
  ìš”ì•½: ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ. 15ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼.

#your-main-channel (ë©”ì¸ ì±„ë„):
  âœ… *[T12]* ğŸ”¨ *worker-A* [A] â€” ì™„ë£Œ
  OrderValidator êµ¬í˜„ + í…ŒìŠ¤íŠ¸ 15ê°œ í†µê³¼

  ğŸ”” *[ìŠ¹ì¸ ìš”ì²­]* DB ìŠ¤í‚¤ë§ˆ ë³€ê²½ í•„ìš”
  ìš”ì²­ì: ğŸ”¨ *worker-A* [A] (íŒ€ *T12*)
  orders í…Œì´ë¸”ì— ì»¬ëŸ¼ ì¶”ê°€ê°€ í•„ìš”í•©ë‹ˆë‹¤...
  âœ… ìŠ¹ì¸ | âŒ ê±°ë¶€
  â³ 300ì´ˆ í›„ íƒ€ì„ì•„ì›ƒ
```

### 4. ìœ„í—˜ ëª…ë ¹ ìŠ¹ì¸

```
Agentê°€ `git push origin main` ì‹¤í–‰ ì‹œë„
  â†“
Slackì— ìŠ¹ì¸ ìš”ì²­ ë©”ì‹œì§€ ê²Œì‹œ:
  âš ï¸ Approval Required
  ```git push origin main```
  âœ… react to approve  |  âŒ react to deny
  â³ auto-deny in 120s
  â†“
ì‚¬ìš©ìê°€ âœ… ë¦¬ì•¡ì…˜ â†’ ëª…ë ¹ ì‹¤í–‰
ì‚¬ìš©ìê°€ âŒ ë¦¬ì•¡ì…˜ â†’ ëª…ë ¹ ì°¨ë‹¨
```

## ê¸´ ë©”ì‹œì§€ ìë™ ì²˜ë¦¬

MCP ì„œë²„ëŠ” ë©”ì‹œì§€ ê¸¸ì´ì— ë”°ë¼ ìµœì ì˜ ì „ì†¡ ë°©ì‹ì„ ìë™ ì„ íƒí•©ë‹ˆë‹¤:

| ê¸¸ì´ | ì²˜ë¦¬ ë°©ì‹ |
|------|-----------|
| ~3,900ì | ì¼ë°˜ ë©”ì‹œì§€ë¡œ ì „ì†¡ |
| 3,900~8,000ì | ì—¬ëŸ¬ ë©”ì‹œì§€ë¡œ ë¶„í•  ì „ì†¡ |
| 8,000ì~ | Slack íŒŒì¼(snippet)ë¡œ ì—…ë¡œë“œ |

## í™˜ê²½ ë³€ìˆ˜

| ë³€ìˆ˜ | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|
| `SLACK_BOT_TOKEN` | âœ… | Slack Bot User OAuth Token (`xoxb-...`) |
| `SLACK_DEFAULT_CHANNEL` | ê¶Œì¥ | ê¸°ë³¸ ì±„ë„ ID (`C0123456789`) |
| `SLACK_BOT_USER_ID` | - | ë´‡ User ID (ë¯¸ì„¤ì • ì‹œ ìë™ ê°ì§€) |
| `SLACK_APPROVAL_TIMEOUT` | - | ìŠ¹ì¸ í›… íƒ€ì„ì•„ì›ƒ ì´ˆ (ê¸°ë³¸: 120) |
| `BG_POLL_INTERVAL` | - | ë°±ê·¸ë¼ìš´ë“œ í´ëŸ¬ ê°„ê²© ms (ê¸°ë³¸: 10000 = 10ì´ˆ) |

## ìƒíƒœ ê´€ë¦¬ + ì˜êµ¬ ì»¨í…ìŠ¤íŠ¸

### íŒŒì¼ ê¸°ë°˜ ìƒíƒœ (state.json â†’ SQLite)
- ë ˆê±°ì‹œ state.jsonì€ ìµœì´ˆ ì‹œì‘ ì‹œ ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜ (state.json.migratedë¡œ ë¦¬ë„¤ì„)
- **ë£¨í”„ ìƒíƒœ**: kv_store í…Œì´ë¸”ì— ì €ì¥
- **íŒ€ ë ˆì§€ìŠ¤íŠ¸ë¦¬**: teams + team_members í…Œì´ë¸”ì— ì €ì¥

### SQLite ì˜êµ¬ ì €ì¥ì†Œ (slack_mcp.db)

| í…Œì´ë¸” | ìš©ë„ | ìƒì¡´ ë²”ìœ„ |
|--------|------|----------|
| `inbox` | ì±„ë„ë³„ ë©”ì‹œì§€ ì¸ë°•ìŠ¤ + ì½ìŒ ìƒíƒœ | 7ì¼ (ìë™ ì •ë¦¬) |
| `channel_cursors` | ì±„ë„ë³„ ë§ˆì§€ë§‰ ì½ì€ ìœ„ì¹˜ | ì˜êµ¬ |
| `watched_threads` | ë´‡ ë©”ì‹œì§€ ìŠ¤ë ˆë“œ ê°ì‹œ (ë‹µê¸€ ê°ì§€ìš©) | 48ì‹œê°„ (ìë™ ì •ë¦¬) |
| `team_tasks` | êµ¬ì¡°í™”ëœ íƒœìŠ¤í¬ (ìƒíƒœ, ì˜ì¡´ì„±, ê²°ê³¼ ìš”ì•½) | ì˜êµ¬ |
| `agent_context` | ì—ì´ì „íŠ¸ë³„ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ëƒ…ìƒ· | ì˜êµ¬ |
| `team_decisions` | ì˜ì‚¬ê²°ì • ì´ë ¥ (ìŠ¹ì¸, ì„¤ê³„, ìš°ì„ ìˆœìœ„) | ì˜êµ¬ |
| `cost_reports` | Claude Code ë¹„ìš© ë³´ê³  ì´ë ¥ | ì˜êµ¬ |
| `team_members` | íŒ€ ë©¤ë²„ ëª©ë¡ (state.json ëŒ€ì²´) | ì˜êµ¬ |
| `teams` | íŒ€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ (state.json ëŒ€ì²´) | ì˜êµ¬ |
| `agent_heartbeats` | ì—ì´ì „íŠ¸ ìƒì¡´ ì‹ í˜¸ ì¶”ì  | ì˜êµ¬ |
| `scheduled_messages` | ì˜ˆì•½ ë©”ì‹œì§€ ê¸°ë¡ | ì˜êµ¬ |
| `permission_requests` | íŒ€ ê¶Œí•œ ìš”ì²­ ì´ë ¥ | ì˜êµ¬ |
| `kv_store` | ë²”ìš© í‚¤-ê°’ ì €ì¥ì†Œ (ë©˜ì…˜ í ë“±) | ì˜êµ¬ |

### ì»¨í…ìŠ¤íŠ¸ ì••ì¶•(Compaction) ë³µêµ¬ íë¦„

```
ì••ì¶• ì „:
  slack_team_save_context(context: { goal, progress, notes, next_steps })
  slack_save_state(task_context: "í˜„ì¬ ì‘ì—… ì„¤ëª…")

ì••ì¶• í›„ (ì¦‰ì‹œ ë³µêµ¬ â€” Slack íˆìŠ¤í† ë¦¬ ì¬ì½ê¸° ë¶ˆí•„ìš”):
  slack_whoami(agent_id)       â†’ ëª¨ë“  íŒ€+íƒœìŠ¤í¬+ì»¨í…ìŠ¤íŠ¸+ì›Œí¬í”Œë¡œìš° ì›ìƒ· ë°˜í™˜
  slack_load_state()           â†’ ë£¨í”„ ìƒíƒœ ë³µì›
  slack_command_loop(since_ts) â†’ ë£¨í”„ ì¬ê°œ
```

### í† í° ì ˆê° íš¨ê³¼ (7ì—ì´ì „íŠ¸, 50ë©”ì‹œì§€, 2.5íšŒ ì••ì¶• ê¸°ì¤€)

| ì§€í‘œ | Slackë§Œ ì‚¬ìš© | SQLite ì»¨í…ìŠ¤íŠ¸ | ì ˆê° |
|------|-------------|----------------|------|
| ì„¸ì…˜ í† í° | ~1.2M | ~98K | **92%** |
| ì••ì¶• í›„ ë³µêµ¬ | 30-60ì´ˆ | 2-5ì´ˆ | **95%** |
| Opus ë¹„ìš©/ì„¸ì…˜ | ~$18 | ~$1.50 | **$16.50** |

## Claude Code ì»¤ìŠ¤í…€ ì»¤ë§¨ë“œ (ì„ íƒ)

í”„ë¡œì íŠ¸ì˜ `.claude/commands/` ë””ë ‰í† ë¦¬ì— ì•„ë˜ íŒŒì¼ì„ ì¶”ê°€í•˜ë©´ ìŠ¬ë˜ì‹œ ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### `/slack-loop`

Slack ëª…ë ¹ ëŒ€ê¸° ë£¨í”„ ëª¨ë“œì— ì§„ì…í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ Slackì— ì…ë ¥í•˜ëŠ” ëª…ë ¹ì„ ì½ê³ , ì‹¤í–‰í•˜ê³ , ê²°ê³¼ë¥¼ ìŠ¤ë ˆë“œë¡œ ë³´ê³ í•˜ëŠ” ê³¼ì •ì„ ë°˜ë³µí•©ë‹ˆë‹¤.

- compact/ì¬ì‹œì‘ í›„ ìë™ìœ¼ë¡œ ì´ì „ ìƒíƒœë¥¼ ë³µêµ¬
- `ì¢…ë£Œ`, `exit`, `quit`, `stop` ëª…ë ¹ìœ¼ë¡œ ë£¨í”„ ì¢…ë£Œ

### `/slack-team-resume`

compact ë˜ëŠ” ì¬ì‹œì‘ í›„ ì—ì´ì „íŠ¸ íŒ€ ì¡°ìœ¨ì„ ë³µêµ¬í•©ë‹ˆë‹¤.

- Slack ì±„ë„ ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ë¥¼ ì§„ì‹¤ì˜ ì›ì²œ(source of truth)ìœ¼ë¡œ ì‚¬ìš©
- sub-agentê°€ ë…ë¦½ì ìœ¼ë¡œ ê³„ì† ì‹¤í–‰ë˜ëŠ” ê²½ìš°ì—ë„ ìƒíƒœë¥¼ ì˜¬ë°”ë¥´ê²Œ ì¶”ì 

## ë¬¸ì œ í•´ê²°

| ì¦ìƒ | í•´ê²° |
|------|------|
| `channel_not_found` | ì±„ë„ ID í™•ì¸ (ì´ë¦„ì´ ì•„ë‹Œ `C...` í˜•ì‹ì˜ ID í•„ìš”) |
| `not_in_channel` | Slackì—ì„œ `/invite @ë´‡ì´ë¦„` ì‹¤í–‰ |
| `missing_scope` | Slack Appì— í•„ìš”í•œ Bot Token Scope ì¶”ê°€ í›„ ì¬ì„¤ì¹˜ |
| `invalid_auth` | `SLACK_BOT_TOKEN` ê°’ í™•ì¸ |
| íŒ€ ì±„ë„ ìƒì„± ì‹¤íŒ¨ | `channels:manage` scope í™•ì¸ |
| ì—ì´ì „íŠ¸ ì´ë¦„/ì•„ì´ì½˜ ë¯¸í‘œì‹œ | `chat:write.customize` scope í™•ì¸ |
| íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨ | `files:write` scope í™•ì¸ |
| ìŠ¹ì¸ í›… ë¦¬ì•¡ì…˜ ê°ì§€ ì•ˆë¨ | `reactions:read` scope í™•ì¸ |

## ë¼ì´ì„ ìŠ¤

MIT
